<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Senior English Test (20 Questions)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #1a3b70;
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
        .question-container {
            display: none;
        }
        .active {
            display: block;
        }
        .option:hover {
            background-color: #fff1ed;
        }
        .option.selected {
            background-color: #ffcebf;
            border-color: #ff683b;
        }
        .option.correct {
            background-color: #bbf7d0;
            border-color: #22c55e;
        }
        .option.incorrect {
            background-color: #fecaca;
            border-color: #ef4444;
        }
        .custom-orange {
            color: #ff683b;
        }
        .custom-orange-bg {
            background-color: #ff683b;
        }
        .custom-orange-hover:hover {
            background-color: #e55a32;
        }
        .logo-container {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 10;
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="logo-container">
        <svg width="120" height="40" viewBox="0 0 120 40" fill="none" xmlns="http://www.w3.org/2000/svg">
            <rect width="120" height="40" rx="8" fill="#ff683b"></rect>
            <text x="60" y="25" font-family="Poppins, sans-serif" font-size="16" font-weight="bold" fill="white" text-anchor="middle">DATO</text>
        </svg>
    </div>

    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <div id="test-container">
            <div id="student-info" class="bg-white rounded-lg shadow-lg p-6 mb-8">
                <h1 class="text-3xl font-bold text-center custom-orange mb-6">Senior English Level Test</h1>
                <p class="text-center text-gray-500 mb-6">20 Questions - Single Section</p>
                <div class="space-y-4">
                    <div class="flex flex-col">
                        <label for="student-name" class="text-gray-700 font-medium mb-1">Nombre Aplicante:</label>
                        <input type="text" id="student-name" class="border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#ff683b]">
                    </div>
                    <div class="flex flex-col">
                        <label for="student-id" class="text-gray-700 font-medium mb-1">Email Aplicante:</label>
                        <input type="text" id="student-id" class="border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#ff683b]">
                    </div>
                    <div class="flex flex-col">
                        <label for="teacher-name" class="text-gray-700 font-medium mb-1">Nombre Asesor:</label>
                        <input type="text" id="teacher-name" class="border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#ff683b]">
                    </div>
                    <button id="start-test" class="w-full custom-orange-bg text-white font-medium py-2 px-4 rounded-md custom-orange-hover transition duration-300 mt-4">Start Test</button>
                </div>
            </div>

            <div id="test-progress" class="bg-white rounded-lg shadow-lg p-6 mb-8 hidden">
                <div class="flex justify-between items-center mb-2">
                    <h2 id="section-title" class="text-xl font-semibold custom-orange">General Knowledge</h2>
                    <span id="progress-text" class="text-gray-600">Question 1 of 20</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                    <div id="progress-bar" class="progress-bar custom-orange-bg h-2.5 rounded-full" style="width: 5%"></div>
                </div>
            </div>

            <div id="test-content" class="hidden">
                <div id="questions-section" class="space-y-8">
                    
                    <div id="question-1" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">1. Complete the paragraph with the correct form of the verbs: I ______ (think) of going for a run every morning at 6 am. I _____ (think) it can have a lot of benefits to my health</h3>
                        <div class="space-y-2">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) am thinking / thought</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) was thinking / am thinking </div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) has been thinking / think /</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) was thinking / think</div>
                        </div>
                    </div>

                    <div id="question-2" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">2. Complete the paragraph with the correct form of the verbs: Once I ______ (finish) my university, I ________ (start) my own art school. I (check) different places to rent for the past 2 weeks </h3>
                        <div class="space-y-2">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) finish / start / checked</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) have finished / have started / check</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) finish / will start / have checked</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) finish / started / am checking</div>
                        </div>
                    </div>

                    <div id="question-3" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">3. Complete the paragraph with the correct form of the verbs: I told my parents that if I _____ (save) enough money, I _____ (buy) my first car next year. I _______ (always, want) to own a car </h3>
                        <div class="space-y-2">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) save / will buy / have always wanted</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) have saved / buy / always want</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) saved / would buy / would always want</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) had saved / bought / always wanted</div>
                        </div>
                    </div>

                    <div id="question-4" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">4. Choose the correct words to complete the paragraph: I am passionate about Chicago History Museum. My uncle, (who / that) is a history major in college, is from Chicago, and that's (why / where) I spent my last holiday</h3>
                        <div class="space-y-2">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) who / why</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) that / why </div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) who / where</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) that / where</div>
                        </div>
                    </div>

                    <div id="question-5" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">5. Choose the correct words to complete the paragraph: Until then, I (have / had) never been there. Yesterday we (supposed / were supposed) to visit his best friends at their favorite caf√©.</h3>
                        <div class="space-y-2">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) have / supposed</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) have / were supposed</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) had / supposed</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) had / were supposed</div>
                        </div>
                    </div>

                    <div id="question-6" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">6. Choose the correct words to complete the paragraph: One of them (is / was) founded in 1920, and it's called "The last book". It (must / can) be the most popular bookstore in the city.</h3>
                        <div class="space-y-2">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) is / must</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) is / can</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) was / must</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) was / can</div>
                        </div>
                    </div>

                    <div id="question-7" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">7. Choose the correct words to complete the paragraph: When we finally (arrived / had arrived) to the caf√©, all of his friends (were / had) already left.</h3>
                        <div class="space-y-2">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) arrived / were</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) arrived / had</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) had arrived / were</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) had arrived / had</div>
                        </div>
                    </div>

                    <div id="question-8" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">8. Complete the conversation: That boy looks a lot like Peter. He ______ be Pete's brother.</h3>
                        <div class="space-y-2">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) can</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) might</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) should</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) must</div>
                        </div>
                    </div>

                    <div id="question-9" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">9. Complete the conversation: It's ten o'clock so he ______ be at work.</h3>
                        <div class="space-y-2">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) might</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) will</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) can</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) should</div>
                        </div>
                    </div>

                    <div id="question-10" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">10. Complete the conversation: My alarm didn't go off, so I _____ be late today.</h3>
                        <div class="space-y-2">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) might</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) can</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) should</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) will</div>
                        </div>
                    </div>

                    <div id="question-11" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">11. Choose the correct words to complete the Conversation</h3>
                        <p class="mb-2"><strong>A:</strong> I walk to school everyday, and my neighborhood (is / isn't) the safest I wish I (can / could) have enough money to buy my own car.</p>
                        <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) can / isn't</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) can / is</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) could / isn't</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) could / is</div>
                        </div>
                    </div>

                    <div id="question-12" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">12. Choose the correct words to complete the Conversation</h3>
                        <p class="mb-2"><strong>B:</strong> I fell you bro. What about taking a cab or the train? If I (has / had) as much money as you, (I'd take / I take) a cab everywhere I go.</p>
                        <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) had / I'd take</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) has / I'd take</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) had / I take</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) has / I take</div>
                        </div>
                    </div>

                    <div id="question-13" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">13. Choose the correct words to complete the Conversation</h3>
                        <p class="mb-2"><strong>A:</strong> Yeah, that was an option indeed. I talked to my parents yesterday, and told (they / them) that I (had / have) thought of doing that.</p>
                        <p><strong>B:</strong>What did they say?</p>
                        <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) had / they</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) have /them </div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) have /they</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) had / them</div>
                        </div>
                    </div>

                   <div id="question-14" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">14. Choose the correct words to complete the Conversation</h3>
                        <p class="mb-2"><strong>A:</strong> They said they (weren't / hadn't) sure. Specially because the pandemic is very dangerous right now. They mentioned that Covid cases (increased / had increased) drastically </p>
                        <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) weren't / had increased</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) hadn't / increase</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) hadn't / had increased</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) weren't / increase</div>
                        </div>
                    </div>

                    <div id="question-15" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">15. Choose the correct past participle form of the verbs: Want, Go, Do, Sell, Buy </h3>
                        <div class="space-y-2">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) Wont, Went, Did, Sold, Buyed</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) Wont, Gone, Done, Sold, Buyed</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) Wanted, Gone, Done, Sold, Bought</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) Wanted, Went, Doid, Selled, Bought</div>
                        </div>
                    </div>

                    <div id="question-16" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">16. Choose the correct words to complete the Conversation</h3>
                        <p class="mb-2"><strong>A:</strong> I think I shouldn't _____ (eat) those spicy quesadillas. Now I'm really sick and my stomach hurts a lot</p>
                        <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) have eaten</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) eaten</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) ate</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) had eaten</div>
                        </div>
                    </div>

                    <div id="question-17" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">17. Choose the correct words to complete the Conversation</h3>
                        <p class="mb-2"><strong>B:</strong> Didn't you really stop to ___ (think) about the possible consequences before you ____ (go) to that Mexican restaurant? Because you ______ (never get userd to) eating spicy food</p>
                        <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) think / go / have never gotten used to</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) think / went / had never gotten used to</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) think / went / have never gotten used to</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) think / went / never get used to</div>
                        </div>
                    </div>

                    <div id="question-18" class="question-container bg-white rounded-lg shadow-lg p-6">
                       <h3 class="text-lg font-medium mb-4">18. Choose the correct words to complete the Conversation</h3>
                        <p class="mb-2"><strong>B:</strong> You could _______ (refuse) to try those quesadillas just for a ridiculous challenge</p>
                        <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) refused</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) have refused</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) refuse</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) had refused</div>
                        </div>
                    </div>

                    <div id="question-19" class="question-container bg-white rounded-lg shadow-lg p-6">
                         <h3 class="text-lg font-medium mb-4">19. Choose the correct words to complete the Conversation</h3>
                        <p class="mb-2"><strong>A:</strong> I really regret it. If I ______ (not accept) the challenge, I ______ (be) fine.</p>
                        <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) hadn't accepted / would be</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) hadn't accepted / would have been</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) haven't accepted / would be</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) didn't accepted / would be</div>
                        </div>
                    </div>

                    <div id="question-20" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">20. Choose the correct past participle form of the verbs: Become, Cost, Sing, Take, Win </h3>
                        <div class="space-y-2">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) Become, Costed, Sang, Took, Won</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) Became, Cost, Sang, Took, Won</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) Became, Costed, Sung, Taken, Won</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) Become, Cost, Sung, Taken, Won</div>
                        </div>
                    </div>
                </div>

                <div class="flex justify-between mt-8">
                    <button id="prev-btn" class="bg-gray-500 text-white font-medium py-2 px-6 rounded-md hover:bg-gray-600 transition duration-300">Previous</button>
                    <button id="next-btn" class="custom-orange-bg text-white font-medium py-2 px-6 rounded-md custom-orange-hover transition duration-300">Next</button>
                </div>
            </div>

            <div id="results-section" class="hidden bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-bold text-center custom-orange mb-6">Test Results</h2>
                <div id="student-info-display" class="mb-6 p-4 bg-gray-50 rounded-md">
                    <p><strong>Student Name:</strong> <span id="result-student-name"></span></p>
                    <p><strong>Student's Email:</strong> <span id="result-student-id"></span></p>
                    <p><strong>Teacher's Name:</strong> <span id="result-teacher-name"></span></p>
                    <p><strong>Date:</strong> <span id="result-date"></span></p>
                    <p><strong>Test Type:</strong> <span>Short Placement (20Q)</span></p>
                </div>
                
                <div class="mb-6">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="text-xl font-semibold">Overall Score</h3>
                        <span id="overall-score" class="text-xl font-bold custom-orange">0/100</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-4">
                        <div id="overall-progress" class="custom-orange-bg h-4 rounded-full" style="width: 0%"></div>
                    </div>
                </div>

                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">Detailed Results</h3>
                    <div class="space-y-6">
                        <div id="results-details" class="bg-gray-50 p-4 rounded-md">
                            <h4 class="font-medium mb-2">Answers</h4>
                            <div id="all-questions-details" class="space-y-2"></div>
                        </div>
                    </div>
                </div>

                <div class="text-center">
                    <button id="send-results" class="custom-orange-bg text-white font-medium py-2 px-6 rounded-md custom-orange-hover transition duration-300">Send Results</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Test data - Reduced to 20 Questions
            const correctAnswers = {
                1: "B", 2: "C", 3: "A", 4: "C", 5: "D", 
                6: "C", 7: "B", 8: "D", 9: "D", 10: "A",
                11: "C", 12: "A", 13: "D", 14: "A", 15: "C", 
                16: "A", 17: "C", 18: "B", 19: "A", 20: "D"
            };

            // Full text of correct answers for 1-20
            const correctAnswerText = {
                1: "was thinking / am thinking",
                2: "finish / will start / have checked",
                3: "save / will buy / have always wanted",
                4: "who / where",
                5: "had / were supposed",
                6: "was / must",
                7: "arrived / had",
                8: "must",
                9: "should",
                10: "might",
                11: "could / isn't",
                12: "had / I'd take",
                13: "had / them",
                14: "weren't / had increased",
                15: "Wanted, Gone, Done, Sold, Bought",
                16: "have eaten",
                17: "think / went / have never gotten used to",
                18: "have refused",
                19: "hadn't accepted / would be",
                20: "Become, Cost, Sung, Taken, Won"
            };

            // Store all question texts
            const questionTexts = {};
            document.querySelectorAll('.question-container').forEach(container => {
                const questionId = container.id;
                const questionNumber = parseInt(questionId.split('-')[1]);
                if (questionNumber <= 20) {
                    const questionText = container.querySelector('h3').textContent;
                    questionTexts[questionNumber] = questionText;
                }
            });

            // Variables to track test state
            let currentQuestion = 1;
            const totalQuestions = 20;
            window.userAnswers = {};
            
            // DOM elements
            const studentInfo = document.getElementById('student-info');
            const testProgress = document.getElementById('test-progress');
            const testContent = document.getElementById('test-content');
            const resultsSection = document.getElementById('results-section');
            const startTestBtn = document.getElementById('start-test');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            
            // Initialize the test
            function initTest() {
                // Hide all questions
                document.querySelectorAll('.question-container').forEach(q => {
                    q.classList.remove('active');
                });
                
                // Show first question
                document.getElementById('question-1').classList.add('active');
                
                // Update progress
                updateProgress();
                
                // Setup option selection
                setupOptionSelection();
            }

            // Start the test
            startTestBtn.addEventListener('click', function() {
                const studentName = document.getElementById('student-name').value.trim();
                const studentId = document.getElementById('student-id').value.trim();
                const teacherName = document.getElementById('teacher-name').value.trim();
                
                if (!studentName || !studentId || !teacherName) {
                    alert('Please fill in all student information fields.');
                    return;
                }
                
                studentInfo.classList.add('hidden');
                testProgress.classList.remove('hidden');
                testContent.classList.remove('hidden');
                
                initTest();
            });

            // Setup option selection
            function setupOptionSelection() {
                document.querySelectorAll('.option').forEach(option => {
                    option.addEventListener('click', function() {
                        // Remove selected class from all options in the same question
                        const questionId = this.closest('.question-container').id;
                        const questionNumber = parseInt(questionId.split('-')[1]);
                        
                        document.querySelectorAll(`#${questionId} .option`).forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        
                        // Add selected class to clicked option
                        this.classList.add('selected');
                        
                        // Save the answer
                        userAnswers[questionNumber] = this.getAttribute('data-value');
                    });
                });
            }

            // Update progress bar and text
            function updateProgress() {
                const progressPercentage = (currentQuestion / totalQuestions) * 100;
                progressBar.style.width = `${progressPercentage}%`;
                
                // Update progress text
                progressText.textContent = `Question ${currentQuestion} of ${totalQuestions}`;
                
                // Update button states
                prevBtn.disabled = currentQuestion === 1;
                prevBtn.classList.toggle('opacity-50', currentQuestion === 1);
                
                if (currentQuestion === totalQuestions) {
                    nextBtn.textContent = "Submit Test";
                } else {
                    nextBtn.textContent = "Next";
                }
            }

            // Navigate to previous question
            prevBtn.addEventListener('click', function() {
                if (currentQuestion > 1) {
                    document.getElementById(`question-${currentQuestion}`).classList.remove('active');
                    currentQuestion--;
                    document.getElementById(`question-${currentQuestion}`).classList.add('active');
                    updateProgress();
                }
            });

            // Navigate to next question or submit test
            nextBtn.addEventListener('click', function() {
                if (currentQuestion < totalQuestions) {
                    document.getElementById(`question-${currentQuestion}`).classList.remove('active');
                    currentQuestion++;
                    document.getElementById(`question-${currentQuestion}`).classList.add('active');
                    updateProgress();
                } else {
                    // Show results
                    showResults();
                }
            });

            // Show test results
            function showResults() {
                testProgress.classList.add('hidden');
                testContent.classList.add('hidden');
                resultsSection.classList.remove('hidden');
                
                // Display student info
                document.getElementById('result-student-name').textContent = document.getElementById('student-name').value;
                document.getElementById('result-student-id').textContent = document.getElementById('student-id').value;
                document.getElementById('result-teacher-name').textContent = document.getElementById('teacher-name').value;
                
                // Display current date
                const today = new Date();
                document.getElementById('result-date').textContent = today.toLocaleDateString();
                
                // Calculate scores (5 points per question now, to equal 100)
                let totalCorrect = 0;
                for (let i = 1; i <= totalQuestions; i++) {
                    if (userAnswers[i] === correctAnswers[i]) {
                        totalCorrect++;
                    }
                }
                const totalScore = totalCorrect * 5; 
                
                // Update score displays
                document.getElementById('overall-score').textContent = `${totalScore}/100`;
                document.getElementById('overall-progress').style.width = `${totalScore}%`;
                
                // Display detailed results
                displayDetailedResults();
            }

            // Display detailed results
            function displayDetailedResults() {
                const detailsContainer = document.getElementById(`all-questions-details`);
                detailsContainer.innerHTML = '';
                
                for (let i = 1; i <= totalQuestions; i++) {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'py-3 border-b border-gray-200 last:border-0';
                    
                    // Add the question text
                    const questionTextDiv = document.createElement('div');
                    questionTextDiv.className = 'mb-2 text-gray-700';
                    questionTextDiv.textContent = questionTexts[i];
                    
                    const questionSpan = document.createElement('div');
                    questionSpan.className = 'font-medium mb-1';
                    questionSpan.textContent = `Question ${i} (5 points):`;
                    
                    const resultDiv = document.createElement('div');
                    resultDiv.className = 'mt-1';
                    
                    if (!userAnswers[i]) {
                        resultDiv.innerHTML = '<span class="text-gray-500">Not answered</span>';
                    } else if (userAnswers[i] === correctAnswers[i]) {
                        resultDiv.innerHTML = `<span class="text-green-600 font-medium">‚úì Correct</span>
                                              <div class="text-sm mt-1">Your answer: ${userAnswers[i]}) ${correctAnswerText[i]}</div>`;
                    } else {
                        resultDiv.innerHTML = `<span class="text-red-600 font-medium">‚úó Incorrect</span>
                                              <div class="text-sm mt-1">Your answer: ${userAnswers[i]}</div>
                                              <div class="text-sm text-green-600">Correct answer: ${correctAnswers[i]}) ${correctAnswerText[i]}</div>`;
                    }
                    
                    questionDiv.appendChild(questionSpan);
                    questionDiv.appendChild(questionTextDiv);
                    questionDiv.appendChild(resultDiv);
                    detailsContainer.appendChild(questionDiv);
                }
            }

            // Send results
            document.getElementById('send-results').addEventListener('click', function () {
                const formData = new URLSearchParams();
                const studentName = document.getElementById('student-name').value;
                const teacherEmail = document.getElementById('student-id').value;
                const teacherName = document.getElementById('teacher-name').value;

                formData.append("studentName", studentName);
                formData.append("teacherEmail", teacherEmail);
                formData.append("teacherName", teacherName);
                formData.append("writing", ""); // No writing section
                formData.append("sheetName", "Senior"); // Manteniendo el nombre de la hoja original

                // Send 1-20
                for (let i = 1; i <= 20; i++) {
                    const answer = userAnswers[i] || "No answer";
                    formData.append("q" + i, answer);
                }

                console.log("üì§ Enviando respuestas del test...");

                // Using the same original URL
                fetch("https://script.google.com/macros/s/AKfycbzRjKykpYoHCRVw79Zusk_sI8PMilAspOY0SVde35sD_2yUPx60BT8IBNi0AiBzgNrf/exec", {
                    method: "POST",
                    body: formData
                })
                .then(() => {
                    console.log("‚úÖ Datos enviados");
                    alert("‚úÖ Resultados enviados correctamente.");
                })
                .catch(error => {
                    console.error("‚ùå Error al enviar:", error);
                    alert("‚ùå Ocurri√≥ un error al enviar los resultados.");
                });
            });
        });
    </script>
</body>
</html>
