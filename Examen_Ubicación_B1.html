<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Junior English Test (20 Questions)</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #1a3b70;
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
        .question-container {
            display: none;
        }
        .active {
            display: block;
        }
        .option:hover {
            background-color: #fff1ed;
        }
        .option.selected {
            background-color: #ffcebf;
            border-color: #ff683b;
        }
        .option.correct {
            background-color: #bbf7d0;
            border-color: #22c55e;
        }
        .option.incorrect {
            background-color: #fecaca;
            border-color: #ef4444;
        }
        .custom-orange {
            color: #ff683b;
        }
        .custom-orange-bg {
            background-color: #ff683b;
        }
        .custom-orange-hover:hover {
            background-color: #e55a32;
        }
        .logo-container {
            position: absolute;
            top: 20px;
            right: 20px;
            z-index: 10;
        }
        @media (max-width: 768px) {
            .logo-container {
                position: relative;
                top: auto;
                right: auto;
                width: 100%;
                display: flex;
                justify-content: center;
                margin-bottom: 20px;
                padding-top: 20px;
            }
            .logo-container img {
                max-width: 120px !important;
            }
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="logo-container">
    <img src="logo-dato.png" alt="Logo" style="max-width: 150px; height: auto;">
    </div>


    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <div id="test-container">
            <div id="student-info" class="bg-white rounded-lg shadow-lg p-6 mb-8">
                <h1 class="text-3xl font-bold text-center custom-orange mb-6">Junior English Level Test</h1>
                <p class="text-center text-gray-500 mb-6">20 Questions - Single Section</p>
                <div class="space-y-4">
                    <div class="flex flex-col">
                        <label for="student-name" class="text-gray-700 font-medium mb-1">Nombre Aplicante:</label>
                        <input type="text" id="student-name" class="border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#ff683b]">
                    </div>
                    <div class="flex flex-col">
                        <label for="student-id" class="text-gray-700 font-medium mb-1">Email Aplicante:</label>
                        <input type="text" id="student-id" class="border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#ff683b]">
                    </div>
                    <div class="flex flex-col">
                        <label for="teacher-name" class="text-gray-700 font-medium mb-1">Nombre Asesor:</label>
                        <input type="text" id="teacher-name" class="border border-gray-300 rounded-md px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#ff683b]">
                    </div>
                    <button id="start-test" class="w-full custom-orange-bg text-white font-medium py-2 px-4 rounded-md custom-orange-hover transition duration-300 mt-4">Start Test</button>
                </div>
            </div>

            <div id="test-progress" class="bg-white rounded-lg shadow-lg p-6 mb-8 hidden">
                <div class="flex justify-between items-center mb-2">
                    <h2 id="section-title" class="text-xl font-semibold custom-orange">General Knowledge</h2>
                    <span id="progress-text" class="text-gray-600">Question 1 of 20</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                    <div id="progress-bar" class="progress-bar custom-orange-bg h-2.5 rounded-full" style="width: 5%"></div>
                </div>
            </div>

            <div id="test-content" class="hidden">
                <div id="questions-section" class="space-y-8">
                    
                    <div id="question-1" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">1. Select the correct anwers to complete the conversation:</h3>
                        <p class="mb-2"><strong>A:</strong> Hello this is my first day. I'm Sofia</p>
                        <p><strong>B:</strong> Hi Sofia, nice to meet you I'm Laura. (Who / Whose) class are you in?</p>
                        <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) Who</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) Whose</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) Who / Whose</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) No estoy segur@</div>
                        </div>
                    </div>

                    <div id="question-2" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">2. Select the correct answers to complete the conversation:</h3>
                        <p class="mb-2"><strong>A:</strong> Ms. Beatriz and you?</p>
                        <p><strong>B:</strong> Me Too</p>
                        <p><strong>A:</strong> Do you know where (is our room / our room is)?</p>
                        <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) our room is</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) is our room</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) our room is / is our room</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) No estoy segur@</div>
                        </div>
                    </div>

                    <div id="question-3" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">3. Select the correct anwers to complete the conversation:</h3>
                        <p class="mb-2"><strong>B:</strong> We're in (Room / the Room) 203. It's on (second / the second) floor.</p>                        
                        <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) Room / second </div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) the Room / the second </div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) the Room / second </div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) Room / the second </div>
                        </div>
                    </div>

                    <div id="question-4" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">4. Select the correct anwers to complete the conversation:</h3>
                        <p class="mb-2"><strong>A:</strong> How long (did you study / have you studied) in this school?</p>                        
                        <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) did you study</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) have you studied</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) did you study / have you studied</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) No estoy segur@</div>
                        </div>
                    </div>

                    <div id="question-5" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">5. Select the correct anwers to complete the conversation:</h3>
                        <p class="mb-2"><strong>B:</strong> (For / Since) a year</p>          <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) For</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) Since</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) For / Since</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) No estoy segur@</div>
                        </div>
                    </div>

                    <div id="question-6" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">6. Select the correct anwers to complete the conversation:</h3>
                        <p class="mb-2"><strong>A:</strong> So you know lots of other students.. I haven't met anybody (yet / already)</p>                 <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) yet</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) already</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) yet / already</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) No estoy segur@</div>
                        </div>
                    </div>

                    <div id="question-7" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">7. Select the correct anwers to complete the conversation:</h3>
                        <p class="mb-2"><strong>B:</strong> Well, you (would / could) join the English conversation Club</p>                                   <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) would</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) could</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) would / could</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) No estoy segur@</div>
                        </div>
                    </div>

                    <div id="question-8" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">8. Complete the paragraph with the correct form of the verbs: "The planet will get hotter in the next 100 year" said many scientists in 2017. In fact they said that the planet _______ (become) 3¬∞C hotter before 2100.</h3>
                        <div class="space-y-2">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) becomes</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) is becoming</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) is going to become</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) will become</div>
                        </div>
                    </div>

                    <div id="question-9" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">9. Complete the paragraph with the correct form of the verbs: Everyone ____ (be) worried about the planet, but no one ______ (known) how to solve the problem</h3>
                        <div class="space-y-2">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) is / knows</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) are / knows</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) is / know</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) are / know</div>
                        </div>
                    </div>

                    <div id="question-10" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">10. Complete the paragraph with the correct form of the verbs: We often consume fruits and vegetables that ______ (produce) in other parts of the country.</h3>
                        <div class="space-y-2">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) are produced</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) will be produced </div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) are producing</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) were produced </div>
                        </div>
                    </div>

                    <div id="question-11" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">11. Complete the paragraph with the correct form of the verbs: Those items _______ (transport) by trucks or planes, and that increases pollution.</h3>
                        <div class="space-y-2">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) will be transported</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) were transported</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) are transported</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) were transporting</div>
                        </div>
                    </div>

                    <div id="question-12" class="question-container bg-white rounded-lg shadow-lg p-6">
                    <h3 class="text-lg font-medium mb-4">12. Complete the paragraph with the correct form of the verbs: If everyone ______ (buy) their food from local farmers, the world _______ (be) less polluted.</h3>
                        <div class="space-y-2">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) buys / would be</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) buy / would be</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) buys / will be</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) buy / will be</div>
                        </div>
                    </div>

                    <div id="question-13" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">13. Complete the paragraph with the correct form of the verbs: Another problem is the use of chemicals. In the past, not so many chemicals _____ (use) by farmers.</h3>
                        <div class="space-y-2">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) are used</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) will be used</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) uses</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) were used</div>
                        </div>
                    </div>

                   <div id="question-14" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">14. Complete the paragraph with the correct form of the verbs: Certainly, people ______ (consume) more organic food if it ______ (not be) so expensive.</h3>
                        <div class="space-y-2">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) are consuming / isn't</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) would consume / isn't</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) are consuming / weren't</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) would consumes / weren't</div>
                        </div>
                    </div>

                    <div id="question-15" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">15. Select the correct anwers to complete the conversation:</h3>
                        <p class="mb-2"><strong>A:</strong> What (are you doing / will do) this weekend?</p>                                   
                        <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) are you doing</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) will you do</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) are you doing / will do</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) No estoy segur@</div>
                        </div>
                    </div>

                    <div id="question-16" class="question-container bg-white rounded-lg shadow-lg p-6">
                       <h3 class="text-lg font-medium mb-4">16. Select the correct anwers to complete the conversation:</h3>
                        <p class="mb-2"><strong>B:</strong> My cousin Jeff and I (are going camping / will go camping) in Hill Valley. Would you like to come?</p>                                   
                        <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) are going camping</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) will go camping</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) are going camping / will go camping</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) No estoy segur@</div>
                        </div>
                    </div>

                    <div id="question-17" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">17. Select the correct anwers to complete the conversation:</h3>
                        <p class="mb-2"><strong>A:</strong> No thanks. Once I (went camping / was camping) with my family when it (started / was starting) to rain really heavily</p>                                   
                        <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) went camping / started </div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) went camping / was starting</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) was camping / was starting</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) was camping / started</div>
                        </div>
                    </div>

                    <div id="question-18" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">18. Select the correct anwers to complete the conversation:</h3>
                        <p class="mb-2"><strong>A:</strong> There was a flood at the campground, and all our belongings got (complete / completely) in Hill Valley. Would you like to come?</p>                             <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) complete</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) completely</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) complete / completely</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) No estoy segur@</div>
                        </div>
                    </div>

                    <div id="question-19" class="question-container bg-white rounded-lg shadow-lg p-6">
                         <h3 class="text-lg font-medium mb-4">19. Select the correct anwers to complete the conversation:</h3>
                        <p class="mb-2"><strong>B:</strong> What (did happen / happened) next?</p>                                   
                        <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) did happen</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) happened</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) did happen / happened</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) No estoy segur@</div>
                        </div>
                    </div>

                    <div id="question-20" class="question-container bg-white rounded-lg shadow-lg p-6">
                        <h3 class="text-lg font-medium mb-4">20. Select the correct anwers to complete the conversation:</h3>
                        <p class="mb-2"><strong>A:</strong> We had to come back home the (next / before) day And I (got / was getting) a really bad cold. That was the last time I went camping</p>                                 <div class="space-y-2 mt-6">
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="A">A) before / got </div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="B">B) before / was getting</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="C">C) next / got</div>
                            <div class="option border border-gray-300 rounded-md p-3 cursor-pointer" data-value="D">D) next / was getting</div>
                        </div>
                    </div>
                </div>

                <div class="flex justify-between mt-8">
                    <button id="prev-btn" class="bg-gray-500 text-white font-medium py-2 px-6 rounded-md hover:bg-gray-600 transition duration-300">Previous</button>
                    <button id="next-btn" class="custom-orange-bg text-white font-medium py-2 px-6 rounded-md custom-orange-hover transition duration-300">Next</button>
                </div>
            </div>

            <div id="results-section" class="hidden bg-white rounded-lg shadow-lg p-6">
                <h2 class="text-2xl font-bold text-center custom-orange mb-6">Test Results</h2>
                <div id="student-info-display" class="mb-6 p-4 bg-gray-50 rounded-md">
                    <p><strong>Student Name:</strong> <span id="result-student-name"></span></p>
                    <p><strong>Student's Email:</strong> <span id="result-student-id"></span></p>
                    <p><strong>Teacher's Name:</strong> <span id="result-teacher-name"></span></p>
                    <p><strong>Date:</strong> <span id="result-date"></span></p>
                    <p><strong>Test Type:</strong> <span>Short Placement (20Q)</span></p>
                </div>
                
                <div class="mb-6">
                    <div class="flex justify-between items-center mb-2">
                        <h3 class="text-xl font-semibold">Overall Score</h3>
                        <span id="overall-score" class="text-xl font-bold custom-orange">0/100</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-4">
                        <div id="overall-progress" class="custom-orange-bg h-4 rounded-full" style="width: 0%"></div>
                    </div>
                </div>

                <div class="mb-8">
                    <h3 class="text-xl font-semibold mb-4">Detailed Results</h3>
                    <div class="space-y-6">
                        <div id="results-details" class="bg-gray-50 p-4 rounded-md">
                            <h4 class="font-medium mb-2">Answers</h4>
                            <div id="all-questions-details" class="space-y-2"></div>
                        </div>
                    </div>
                </div>

                <div class="text-center">
                    <button id="send-results" class="custom-orange-bg text-white font-medium py-2 px-6 rounded-md custom-orange-hover transition duration-300">Send Results</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Test data - Reduced to 20 Questions
            const correctAnswers = {
                1: "B", 2: "A", 3: "D", 4: "B", 5: "A", 
                6: "A", 7: "B", 8: "D", 9: "B", 10: "A",
                11: "C", 12: "A", 13: "A", 14: "D", 15: "A", 
                16: "A", 17: "D", 18: "B", 19: "B", 20: "C"
            };

            // Full text of correct answers for 1-20
            const correctAnswerText = {
                1: "Whose",
                2: "our room is",
                3: "Room / the second",
                4: "have you studied",
                5: "For",
                6: "yet",
                7: "could",
                8: "will become",
                9: "is / knows",
                10: "are produced",
                11: "are transported",
                12: "buys / would be",
                13: "are used",
                14: "would consumes / weren't",
                15: "are you doing",
                16: "are going camping",
                17: "was camping / started",
                18: "completely",
                19: "happened",
                20: "next / got"
            };

            // Store all question texts
            const questionTexts = {};
            document.querySelectorAll('.question-container').forEach(container => {
                const questionId = container.id;
                const questionNumber = parseInt(questionId.split('-')[1]);
                if (questionNumber <= 20) {
                    const questionText = container.querySelector('h3').textContent;
                    questionTexts[questionNumber] = questionText;
                }
            });

            // Variables to track test state
            let currentQuestion = 1;
            const totalQuestions = 20;
            window.userAnswers = {};
            
            // DOM elements
            const studentInfo = document.getElementById('student-info');
            const testProgress = document.getElementById('test-progress');
            const testContent = document.getElementById('test-content');
            const resultsSection = document.getElementById('results-section');
            const startTestBtn = document.getElementById('start-test');
            const prevBtn = document.getElementById('prev-btn');
            const nextBtn = document.getElementById('next-btn');
            const progressBar = document.getElementById('progress-bar');
            const progressText = document.getElementById('progress-text');
            
            // Initialize the test
            function initTest() {
                // Hide all questions
                document.querySelectorAll('.question-container').forEach(q => {
                    q.classList.remove('active');
                });
                
                // Show first question
                document.getElementById('question-1').classList.add('active');
                
                // Update progress
                updateProgress();
                
                // Setup option selection
                setupOptionSelection();
            }

            // Start the test
            startTestBtn.addEventListener('click', function() {
                const studentName = document.getElementById('student-name').value.trim();
                const studentId = document.getElementById('student-id').value.trim();
                const teacherName = document.getElementById('teacher-name').value.trim();
                
                if (!studentName || !studentId || !teacherName) {
                    alert('Please fill in all student information fields.');
                    return;
                }
                
                studentInfo.classList.add('hidden');
                testProgress.classList.remove('hidden');
                testContent.classList.remove('hidden');
                
                initTest();
            });

            // Setup option selection
            function setupOptionSelection() {
                document.querySelectorAll('.option').forEach(option => {
                    option.addEventListener('click', function() {
                        // Remove selected class from all options in the same question
                        const questionId = this.closest('.question-container').id;
                        const questionNumber = parseInt(questionId.split('-')[1]);
                        
                        document.querySelectorAll(`#${questionId} .option`).forEach(opt => {
                            opt.classList.remove('selected');
                        });
                        
                        // Add selected class to clicked option
                        this.classList.add('selected');
                        
                        // Save the answer
                        userAnswers[questionNumber] = this.getAttribute('data-value');
                    });
                });
            }

            // Update progress bar and text
            function updateProgress() {
                const progressPercentage = (currentQuestion / totalQuestions) * 100;
                progressBar.style.width = `${progressPercentage}%`;
                
                // Update progress text
                progressText.textContent = `Question ${currentQuestion} of ${totalQuestions}`;
                
                // Update button states
                prevBtn.disabled = currentQuestion === 1;
                prevBtn.classList.toggle('opacity-50', currentQuestion === 1);
                
                if (currentQuestion === totalQuestions) {
                    nextBtn.textContent = "Submit Test";
                } else {
                    nextBtn.textContent = "Next";
                }
            }

            // Navigate to previous question
            prevBtn.addEventListener('click', function() {
                if (currentQuestion > 1) {
                    document.getElementById(`question-${currentQuestion}`).classList.remove('active');
                    currentQuestion--;
                    document.getElementById(`question-${currentQuestion}`).classList.add('active');
                    updateProgress();
                }
            });

            // Navigate to next question or submit test
            nextBtn.addEventListener('click', function() {
                if (currentQuestion < totalQuestions) {
                    document.getElementById(`question-${currentQuestion}`).classList.remove('active');
                    currentQuestion++;
                    document.getElementById(`question-${currentQuestion}`).classList.add('active');
                    updateProgress();
                } else {
                    // Show results
                    showResults();
                }
            });

            // Show test results
            function showResults() {
                testProgress.classList.add('hidden');
                testContent.classList.add('hidden');
                resultsSection.classList.remove('hidden');
                
                // Display student info
                document.getElementById('result-student-name').textContent = document.getElementById('student-name').value;
                document.getElementById('result-student-id').textContent = document.getElementById('student-id').value;
                document.getElementById('result-teacher-name').textContent = document.getElementById('teacher-name').value;
                
                // Display current date
                const today = new Date();
                document.getElementById('result-date').textContent = today.toLocaleDateString();
                
                // Calculate scores (5 points per question now, to equal 100)
                let totalCorrect = 0;
                for (let i = 1; i <= totalQuestions; i++) {
                    if (userAnswers[i] === correctAnswers[i]) {
                        totalCorrect++;
                    }
                }
                const totalScore = totalCorrect * 5; 
                
                // Update score displays
                document.getElementById('overall-score').textContent = `${totalScore}/100`;
                document.getElementById('overall-progress').style.width = `${totalScore}%`;
                
                // Display detailed results
                displayDetailedResults();
            }

            // Display detailed results
            function displayDetailedResults() {
                const detailsContainer = document.getElementById(`all-questions-details`);
                detailsContainer.innerHTML = '';
                
                for (let i = 1; i <= totalQuestions; i++) {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'py-3 border-b border-gray-200 last:border-0';
                    
                    // Add the question text
                    const questionTextDiv = document.createElement('div');
                    questionTextDiv.className = 'mb-2 text-gray-700';
                    questionTextDiv.textContent = questionTexts[i];
                    
                    const questionSpan = document.createElement('div');
                    questionSpan.className = 'font-medium mb-1';
                    questionSpan.textContent = `Question ${i} (5 points):`;
                    
                    const resultDiv = document.createElement('div');
                    resultDiv.className = 'mt-1';
                    
                    if (!userAnswers[i]) {
                        resultDiv.innerHTML = '<span class="text-gray-500">Not answered</span>';
                    } else if (userAnswers[i] === correctAnswers[i]) {
                        resultDiv.innerHTML = `<span class="text-green-600 font-medium">‚úì Correct</span>
                                              <div class="text-sm mt-1">Your answer: ${userAnswers[i]}) ${correctAnswerText[i]}</div>`;
                    } else {
                        resultDiv.innerHTML = `<span class="text-red-600 font-medium">‚úó Incorrect</span>
                                              <div class="text-sm mt-1">Your answer: ${userAnswers[i]}</div>
                                              <div class="text-sm text-green-600">Correct answer: ${correctAnswers[i]}) ${correctAnswerText[i]}</div>`;
                    }
                    
                    questionDiv.appendChild(questionSpan);
                    questionDiv.appendChild(questionTextDiv);
                    questionDiv.appendChild(resultDiv);
                    detailsContainer.appendChild(questionDiv);
                }
            }

            // Send results
            document.getElementById('send-results').addEventListener('click', function () {
                const formData = new URLSearchParams();
                const studentName = document.getElementById('student-name').value;
                const teacherEmail = document.getElementById('student-id').value;
                const teacherName = document.getElementById('teacher-name').value;

                formData.append("studentName", studentName);
                formData.append("teacherEmail", teacherEmail);
                formData.append("teacherName", teacherName);
                formData.append("writing", ""); // No writing section
                formData.append("sheetName", "Junior"); // Manteniendo el nombre de la hoja original

                // Send 1-20
                for (let i = 1; i <= 20; i++) {
                    const answer = userAnswers[i] || "No answer";
                    formData.append("q" + i, answer);
                }

                console.log("üì§ Enviando respuestas del test...");

                // Using the same original URL
                fetch("https://script.google.com/macros/s/AKfycbwm2FADQlnIA1hJ1nDFDmpDVz7OzV_FitKCieCpqzZMyhJDlNH3239muPIY94nY3jlv/exec", {
                    method: "POST",
                    body: formData
                })
                .then(() => {
                    console.log("‚úÖ Datos enviados");
                    alert("‚úÖ Resultados enviados correctamente.");
                })
                .catch(error => {
                    console.error("‚ùå Error al enviar:", error);
                    alert("‚ùå Ocurri√≥ un error al enviar los resultados.");
                });
            });
        });
    </script>
</body>
</html>

